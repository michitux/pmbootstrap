# Contributor: Michael Hamann <michael.hamann@kit.edu>
# Maintainer: Michael Hamann <michael.hamann@kit.edu>
pkgname=rofi
pkgver=1.5.1
pkgrel=0
pkgdesc="A window switcher, application launcher and dmenu replacement"
url="https://github.com/DaveDavenport/rofi/"
arch="all"
license="MIT"
depends="bash"
depends_dev="xkeyboard-config"
makedepends="bison flex libxkbcommon-dev libxcb-dev xcb-util-dev xcb-util-wm-dev xcb-util-xrm-dev pango-dev startup-notification-dev librsvg-dev check-dev $depends_dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="https://github.com/DaveDavenport/$pkgname/releases/download/$pkgver/rofi-$pkgver.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	cd "$builddir"
	LC_ALL=C make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install install-man

	install -dm755 "$pkgdir/usr/share/doc/rofi/examples"
	install -Dm755 Examples/*.sh "$pkgdir/usr/share/doc/rofi/examples"
}

sha512sums="c01836985f52bc79611033008b6cd23c0ce655b7af039c587870b401ca76f4e92755b69fc9167357a93b4c335bca8e10ff6fcd2d62845336f9024b409f63272f  rofi-1.5.1.tar.gz"
